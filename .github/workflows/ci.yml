name: Python Project CI

# 触发条件：推送到 main 分支
on:
  push:
    branches: [ main ]
  pull_request:
    branches: [ main ]

jobs:
  test:
    runs-on: ubuntu-latest
    steps:
    # 1. 下载代码
    - uses: actions/checkout@v4
    
    # 2. 安装 Python 3.10
    - name: Set up Python
      uses: actions/setup-python@v5
      with:
        python-version: '3.10'
    
    # 3. 安装依赖
    - name: Install dependencies
      run: |
        python -m pip install --upgrade pip
        pip install pytest pytest-cov
        # 如果你有 requirements.txt，也可以 pip install -r project/requirements.txt
    
    # 4. 运行测试 (关键：要进入 project 目录)
    - name: Run Tests
      run: |
        cd project
        python -m pytest --cov=.

